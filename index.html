<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WhatsApp Group Creator</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="app-header">
      <h1>
        <span class="icon">ğŸ“±</span>
        WhatsApp Group Creator
      </h1>
      <div class="connection-status" id="connectionStatus">
        <span class="status-indicator" id="statusIndicator"></span>
        <span id="statusText">Initializing...</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- QR Code Section -->
      <section class="qr-section" id="qrSection" style="display: none;">
        <div class="card">
          <h2>ğŸ” WhatsApp Authentication</h2>
          <div id="qrLoading" class="qr-loading">
            <div class="spinner"></div>
            <p>Generating QR Code...</p>
          </div>
          <div id="qrCode" class="qr-container" style="display: none;"></div>
          <div class="qr-controls">
            <button type="button" id="retryQrButton" class="btn btn-secondary btn-small">
              ğŸ”„ Retry / Reload QR
            </button>
          </div>
          <p class="qr-instructions">
            Open WhatsApp on your phone â†’ Settings â†’ Linked Devices â†’ Link a Device â†’ Scan this QR code
          </p>
        </div>
      </section>

      <!-- Group Creation Form -->
      <section class="form-section" id="formSection">
        <div class="card">
          <h2>ğŸ“‹ Group Configuration</h2>
          
          <div class="form-group">
            <label for="groupName">Group Name <span class="required">*</span></label>
            <input type="text" id="groupName" placeholder="Enter group name" maxlength="25" required>
            <div class="form-hint">Maximum 25 characters</div>
          </div>

          <div class="form-group">
            <label for="csvFile">CSV File <span class="required">*</span></label>
            <div class="file-input-wrapper">
              <input type="file" id="csvFile" accept=".csv" required>
              <button type="button" id="openCSVButton" class="btn btn-secondary">
                ğŸ“ Open CSV File
              </button>
            </div>
            <div class="form-hint">Select a CSV file containing phone numbers</div>
          </div>

          <div class="form-group" id="columnSelectGroup" style="display: none;">
            <label for="columnSelect">Phone Number Columns <span class="required">*</span></label>
            <select id="columnSelect" multiple required></select>
            <div class="form-hint">Hold Ctrl/Cmd to select multiple columns</div>
          </div>

          <div class="form-group">
            <button type="button" id="createGroupButton" class="btn btn-primary" disabled>
              ğŸš€ Create WhatsApp Group
            </button>
          </div>
        </div>
      </section>

      <!-- Progress Section -->
      <section class="progress-section" id="progressSection" style="display: none;">
        <div class="card">
          <h3 id="progressTitle">Processing...</h3>
          <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
          </div>
          <div class="progress-text" id="progressText">Preparing...</div>
        </div>
      </section>

      <!-- Results Section -->
      <section class="results-section" id="resultsSection" style="display: none;">
        <div class="card">
          <h3>ğŸ“Š Results Summary</h3>
          <div id="resultsSummary"></div>
          <button type="button" id="exportResultsButton" class="btn btn-secondary">
            ğŸ’¾ Export Results
          </button>
        </div>
      </section>

      <!-- Statistics Section -->
      <section class="stats-section" id="statsSection" style="display: none;">
        <div class="card">
          <h3>ğŸ“ˆ Statistics</h3>
          <div class="stats-grid" id="statsGrid"></div>
        </div>
      </section>
    </main>

    <!-- Log Console -->
    <aside class="log-console" id="logConsole">
      <div class="console-header">
        <h4>ğŸ“ Activity Log</h4>
        <div class="console-controls">
          <button type="button" id="clearLogButton" class="btn btn-small">Clear</button>
          <button type="button" id="toggleLogButton" class="btn btn-small">Minimize</button>
        </div>
      </div>
      <div class="console-body" id="consoleBody">
        <div class="log-entries" id="logEntries"></div>
      </div>
    </aside>

    <!-- Preferences Modal -->
    <div class="modal" id="preferencesModal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3>âš™ï¸ Preferences</h3>
          <button type="button" class="modal-close" id="closePreferences">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="rateLimitDelay">Rate Limit Delay (ms)</label>
            <input type="number" id="rateLimitDelay" min="500" max="5000" step="100">
            <div class="form-hint">Delay between WhatsApp API calls</div>
          </div>
          <div class="form-group">
            <label for="participantDelay">Participant Add Delay (ms)</label>
            <input type="number" id="participantDelay" min="1000" max="10000" step="500">
            <div class="form-hint">Delay between adding participants</div>
          </div>
          <div class="form-group">
            <label for="maxLogLines">Maximum Log Lines</label>
            <input type="number" id="maxLogLines" min="100" max="2000" step="100">
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="autoScrollLogs">
              Auto-scroll logs
            </label>
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="showOperatorStats">
              Show operator statistics
            </label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" id="savePreferences" class="btn btn-primary">Save</button>
          <button type="button" id="cancelPreferences" class="btn btn-secondary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
      <div class="loading-spinner">
        <div class="spinner"></div>
        <p>Loading...</p>
      </div>
    </div>
  </div>

  <script src="src/renderer.js"></script>
</body>
</html>
